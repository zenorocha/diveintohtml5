<!DOCTYPE html>
<meta charset=utf-8>
<title>Web Forms - Dive Into HTML5</title>
<title>Formulários Web - Dive into HTML5</title>
<!--[if lt IE 9]><script src=j/html5.js></script><![endif]-->
<link rel=alternate type=application/atom+xml href=https://github.com/diveintomark/diveintohtml5/commits/master.atom>
<link rel=stylesheet href=screen.css>
<style>
body{counter-reset:h1 9}
</style>
<link rel=stylesheet media='only screen and (max-device-width: 480px)' href=mobile.css>
<link rel=prefetch href=index.html>
<p>Você está aqui: <a href=index.html>Home</a> <span class=u>&#8227;</span> <a href=table-of-contents.html#forms>Dive Into <abbr>HTML5</abbr></a> <span class=u>&#8227;</span>
<h1><br>Uma Forma De Loucura</h1>
<p id=toc>&nbsp;
<p class=a>&#x2767;
<h2 id=divingin>Mergulhando</h2>

<p class=f><img src=i/aoc-t.png alt=t width=107 height=105>odo mundo conhece sobre formulários web, certo? Crie uma marcação <code>&lt;form></code>, alguns campos <code>&lt;input type="text"></code>, ou talvez  <code>&lt;input type="password"></code>, no final um botão <code>&lt;input type="submit"></code> , e pronto está feito.
<p>Você não conhece nem a metade deles. A <abbr>HTML5</abbr> definiu mais de meia dúzia de novos tipos de campos que você pode usar em seus formulários. E quando digo "usar", é usar agora - sem nenhuma gambiarra, hack ou soluções alternativas. Só não se entusiasme tanto; Eu não disse que todos estes recursos são suportados por todos os navegadores da atualidade. Oh, meu Deus, eu também não disse em nenhum. Em navegadores modernos, seus formulários irão arrebentar. Nos mais antiquados eles irão apenas cumprir sua função. Ou seja, os recursos irão se adaptar e degradar para funcionar em todos os navegadores. Até no IE6. 

<p class=a>&#x2767;

<h2 id=placeholder>Placeholder</h2>

<table class=bc>
<caption>
Suporte ao Placeholder
</caption>
<thead>
<tr><th title="Internet Explorer">IE<th title="Mozilla Firefox">Firefox<th title="Apple Safari">Safari<th title="Google Chrome">Chrome<th>Opera<th>iPhone<th>Android
<tbody>
<tr><td>&middot;<td>3.7+<td>4.0+<td>4.0+<td>11.0+<td>4.0+<td>&middot;
</table>

<p>O primeiro aperfeiçoamento que a <abbr>HTML5</abbr> trouxe aos formulários web é o recurso para definir um <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute>texto como placeholder</a>, em campos input. Este texto é exibido dentro do input enquanto o campo estiver vazio ou sem foco. Logo que é clicado (ou acessado por tab) o texto placeholder desaparece.

<p>Você provavelmente já viu o placeholder antes. Por exemplo, o Mozilla Firefox possui um texto placeholder na barra de endereço onde se lê “Search Bookmarks and History”:

<p class=c><img src=i/location-bar-empty-unfocused.png alt="barra de endereço com texto placeholder" width=268 height=30>

<p>Quando voce clica (ou acessa por tab) a barra de endereço, o texto desaparece:
<p class=c><img src=i/location-bar-empty-focused.png alt="barra de endereço com foco e sem o texto placeholder" width=268 height=30>

<p>Aqui como você pode incluir um texto placeholder em seu formulário web:
<pre><code>&lt;form>
  &lt;input name="q" <mark>placeholder="Search Bookmarks and History"</mark>>
  &lt;input type="submit" value="Search">
&lt;/form></code></pre>

<p>Navegadores que não suportam o atributo <code>placeholder</code> irão simplesmente ignorá-lo. <a href=examples/input-placeholder.html> Veja se o seu navegador suporta o texto placeholder.</a>.



<div class="pf clear">
<h4>Pergunte ao Professor Marcação</h4>
<div class=inner>
<blockquote class=note>
<p><span>&#x261E;</span>P: Eu posso usar marcações <abbr>HTML</abbr> no atributo <code>placeholder</code>? Eu gostaria de inserir uma imagem, ou talvez mudar as cores.<br>
R: O atributo <code>placeholder</code> só pode conter texto, nenhuma marcação <abbr>HTML</abbr>. Porém há algumas <a href=http://trac.webkit.org/export/37527/trunk/LayoutTests/fast/forms/placeholder-pseudo-style.html>extensões do CSS especificamente proprietárias</a> que permitem estilizar o texto placeholder em alguns navegadores.
</blockquote>
</div>
</div>

<p class=a>&#x2767;

<h2 id=autofocus>Campos com foco automático</h2>

<table class=bc>
<caption>Suporte ao Autofocus</caption>
<thead>
<tr><th title="Internet Explorer">IE<th title="Mozilla Firefox">Firefox<th title="Apple Safari">Safari<th title="Google Chrome">Chrome<th>Opera<th>iPhone<th>Android
<tbody>
<tr><td>&middot;<td>4.0+<td>4.0+<td>3.0+<td>10.0+<td>&middot;<td>&middot;
</table>

<p class=ss><img src=i/openclipart.org_johnny_automatic_angry_guy.png alt="rapaz nervoso com os braços levantados" width=188 height=262>

<p>Web sites podem usar JavaScript para criar um foco automático no primeiro campo de um formulário. Por exemplo, a página inicial do <a href=http://www.google.com.br/>Google</a> foca automaticamente no campo de busca para você poder digitar suas palavras-chaves. Enquanto isto é conveniente para a maioria das pessoas, pode ser irritante para usuários experientes ou pessoas com necessidades especiais. Caso você pressione a barra de espaço esperando que a página role, ela não irá, pois o foco está em um campo de formulário. (Você terá um espaço no campo ao invés da rolagem). Se seu foco estiver em um outro campo enquanto a página ainda estiver carregando, o código de foco automático, que deveria ajudar, irá mover o foco para o campo original, interrompendo seu fluxo e fazendo com que digite no lugar errado.

<p>Por causa do foco automático ser processado pelo JavaScript, torna complicado lidar com estes casos específicos, e isto é um pequeno ajuste para as pessoas que não querem que o website &#8220;roube&#8221; o foco.

<p>Para resolver este problema, a <abbr>HTML5</abbr> introduziu <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control>um atributo de <code>autofocus</code> para todos elementos de formulário web</a>. O atributo <code>autofocus</code> executa exatamente o que ele diz, foco automático. O truque: logo que a página carrega, ele move o foco para um campo em particular. Mas como ele é apenas uma marcação ao invés de um script, o comportamento se torna consistente durante todo o website. Além disso, navegadores (ou extensões) podem oferecer que o usuário desabilite o foco automático.

<p>Abaixo como você pode definir um campo de formulário com foco automático:

<pre><code>&lt;form>
  &lt;input name="q" <mark>autofocus</mark>>
  &lt;input type="submit" value="Search">
&lt;/form></code></pre>

<p>Navegadores que não suportam o atributo <code>autofocus</code> simplesmente irão ignorá-lo. <a href=examples/input-autofocus.html>Veja se o seu navegador suporta o campo de foco automático.</a>.

<p>Como assim? Você quer dizer que deseja que o autofocus funcione em todos os navegadores, não apenas nestes navegadores cheios de <abbr>HTML5</abbr>? Bom, Você pode manter seu script atual de foco automático. Faça apenas estas duas pequenas alterações:

<ol>
<li>Adicione o atributo <code>autofocus</code> na sua marcação <abbr>HTML</abbr>
<li><a href=detect.html#input-autofocus>Detecte se o navegador suporta o atributo <code>autofocus</code></a>, e execute o seu próprio script de foco automático, apenas se o navegador não suportar autofocus nativamente.</ol>

<p class="legend top" style="margin-left:10em"><span class=arrow>&#x21b6;</span> Autofocus com fallback
<pre><code>&lt;form name="f">
  &lt;input id="q" <mark>autofocus</mark>>
  &lt;script>
    if (<mark>!("autofocus" in document.createElement("input"))</mark>) {
      document.getElementById("q").focus();
    }
  &lt;/script>
  &lt;input type="submit" value="Go">
&lt;/form>
&hellip;</code></pre>

<p><a href=examples/input-autofocus-with-fallback.html>Veja um exemplo de <code>autofocus</code> com fallback</a>.

<h3 id=more-on-focus>Defina um foco o mais cedo possível</h3>

<p>Muitas páginas da web esperam o carregamento do <code>window.onload</code> para definir um foco. Mas o evento  <code>window.onload</code> não executa nenhuma ação <em>até que</em> todas as imagens tenham sido carregadas. Se sua página possui diversas imagens, seu script pode atrapalhar e refazer o foco em um campo, enquanto o usuário já estiver interagindo em outra parte da página. Por isso que usuários experientes odeiam scripts de foco automático.

<p>O exemplo a seguir executa o script de foco automático imediatamente depois que os campos de formulário são declarados. Está é a solução ideal, mas pode ofender seu ego, por colocar um bloco de código JavaScript no meio da página. (Ou, mais prático, seu sistema de back-end, pode não ter esta flexibilidade.) Se você não pode colocar um script no meio da página, você deverá definir o foco durante um evento personalizado. Por exemplo, o <a href="http://docs.jquery.com/Tutorials:Introducing_$(document).ready()"><code>$(document).ready()</code></a> do jQuery ao invés de <code>window.onload</code>.

<p class="legend top" style="margin-left:10em"><span class=arrow>&#x21b6;</span> Autofocus com jQuery fallback
<pre><code>&lt;head>
&lt;script src=jquery.min.js>&lt;/script>
&lt;script>
  <mark>$(document).ready</mark>(function() {
    if (!("autofocus" in document.createElement("input"))) {
      $("#q").focus();
    }
  });
&lt;/script>
&lt;/head>
&lt;body>
&lt;form name="f">
  &lt;input id="q" autofocus>
  &lt;input type="submit" value="Go">
&lt;/form>
</code></pre>

<p><a href=examples/input-autofocus-with-fallback-document-ready.html>Veja um exemplo do <code>autofocus</code> com jQuery fallback</a>.

<p>jQuery executa o evento personalizado <code>ready</code> logo que o <abbr>DOM</abbr> estiver disponível &mdash; isto é, ele espera até que todo o texto da página carregue, mas não espera até todas as imagens. Não está perto do ideal - se a página for consideravelmente grande ou a conexão de internet for extremamente baixa, o usuário pode começar a interagir com a página antes do seu script de foco automático execute. Mas é muito melhor que esperar o <code>window.onload</code>.

<p>Se você estiver hesitante ou não puder inserir um bloco isolado de código em seu <abbr>HTML</abbr>, há um meio termo menos ofensivo que a primeira opção e mais otimizado que a segunda. É possível utilizar eventos personalizados do jQuery para definir seu próprio, digamos  <code>autofocus_ready</code>. Assim você pode acioná-lo manualmente, imediatamente depois que o campo com autofocus fique disponível. <i>Obrigado a E. M. Sternberg por me ensinar sobre está técnica.</i>

<p class="legend top" style="margin-left:10em"><span class=arrow>&#x21b6;</span> Autofocus com fallback utilizando evento personalizado
<pre><code>&lt;head>
&lt;script src=jquery.min.js>&lt;/script>
&lt;script>
  <mark>$(document).bind('autofocus_ready',</mark> function() {
    if (!("autofocus" in document.createElement("input"))) {
      $("#q").focus();
    }
  });
&lt;/script>
&lt;/head>
&lt;body>
&lt;form name="f">
  &lt;input id="q" autofocus>
  &lt;script><mark>$(document).trigger('autofocus_ready');</mark>&lt;/script>
  &lt;input type="submit" value="Go">
&lt;/form>
</code></pre>

<p><a href=examples/input-autofocus-with-fallback-custom-event.html>Veja um exemplo de <code>autofocus</code> com fallback utilizando evento personalizado</a>.

<p>Esta abordagem é melhor que a primeira; o foco será definido o mais cedo que a técnica permitir, enquanto o texto da página ainda estiver carregando. Mas ele transfere a maior parte da lógica da sua aplicação (foco do campo de formulário) para fora do corpo da página. Este exemplo é baseado em jQuery, mas o conceito de eventos personalizados não é único do jQuery. Outras bibliotecas JavaScript como YUI e Dojo oferecem capacidades similares.

<p>Para resumir:

<ul>
<li>Definir o foco corretamente é importante.
<li>De todas as possibilidades, deixe o navegador trabalhar definindo o atributo <code>autofocus</code> no campo de formulário no qual deseja o foco.
<li>Se codificar um fallback para navegadores antigos, detecte o suporte do atributo <code>autofocus</code> e garanta que o fallback será executado <em>apenas</em> em navegadores antigos.
<li>Defina o foco o mais cedo possível. Insira o script de foco dentro da marcação imediatamente pós o campo de formulário. Se isto ofender você, use bibliotecas JavaScript que suportem eventos personalizados para acionar um evento personalizado imediatamente depois que o campo de formulário estiver disponível. Se não for possível, use apenas algo como o evento <code>$(document).ready()</code>.
<li>Sobre outras circunstâncias espere até carregar <code>window.onload</code> para ter o foco definido.
</ul>

<p class=a>&#x2767;

<h2 id=type-email>Endereços de Email</h2>

<p>Por mais de uma década, existiam apenas alguns tipos de campos nos formulários web. Os mais comuns eram:

<table class=st>
<tr class=ho><th>Field Type<th><abbr>HTML</abbr> Code<th>Notes
<tr class=zebra><th>checkbox<td><code>&lt;input type="checkbox"></code><td>pode ser marcado ou não
<tr><th>radio button<td><code>&lt;input type="radio"></code><td>pode ser agrupado com outros
<tr class=zebra><th>password field<td><code>&lt;input type="password"></code><td>exibe pontos ao invés dos caracteres digitados
<tr><th>drop-down lists<td><code>&lt;select>&lt;option>&hellip;</code><td>
<tr class=zebra><th>file picker<td><code>&lt;input type="file"></code><td>abre uma janela para &#8220;abrir arquivos&#8221;
<tr><th>submit button<td><code>&lt;input type="submit"></code><td>
<tr class=zebra><th>plain text<td><code>&lt;input type="text"></code><td>o atributo <code>type</code> pode ser omitido
</table>

<p>Todos esses campos continuam funcionando em <abbr>HTML5</abbr>. Se você &#8220;atualizar para <abbr>HTML5</abbr>&#8221; (quem sabe, <a href=semantics.html#the-doctype>mudando o DOCTYPE</a>), não vai ser preciso fazer nenhuma mudança nos formulários. Viva a compatibilidade!

<p>No entanto, há 13 novos tipos de campos na <abbr>HTML5</abbr> , e por razões que ficarão claras em breve <em>não</em> há porque não começar a utiliza-los.

<p>O primeiro destes novos campos é o <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state>endereço de email</a>. Se declara assim:

<pre><code>&lt;form>
  <mark>&lt;input type="email"></mark>
  &lt;input type="submit" value="Go">
&lt;/form></code></pre>

<p>Eu estava prestes a escrever uma frase que começava com &#8220;nos navegadores que não suportam <code>type="email"</code>&hellip;&#8221; mas me impedi. Por que? Porquê eu não tenho certeza do que quer dizer um navegador não suportar <code>type="email"</code>. Todos os navegadores &#8220;suportam&#8221; <code>type="email"</code>. Eles só não fazem nada de especial com ele (você verá alguns exemplos especiais de tratamento em breve), mas navegadores que não reconhecem <code>type="email"</code> irão trata-lo como <code>type="text"</code> e renderizar um tipo de campo simples.

<p>Eu não consigo enfatizar quão importante ele é. A internet possui milhões de formulários que pedem para digitar um endereço de email, e todos eles usam <code>&lt;input type="text"></code>. Você vê um campo de texto, você digita um endereço de email na caixa, e é isto. Com a <abbr>HTML5</abbr> utilize a definição <code>type="email"</code>. Os navegadores vão surtar? Não. Todo o tipo de navegador da Terra trata um atributo <code>type</code> nulo como <code>type="text"</code> &mdash; inclusive o IE6. Então você pode &#8220;atualizar&#8221; seu formulário para <code>type="email"</code> agora.

<p>O que você quer dizer com os navegadores <em>AINDA</em> suportam <code>type="email"</code>? Bom, significa várias coisas. A especificação da <abbr>HTML5</abbr> não exige nenhuma interface particular para este novo tipo de campo. A maioria dos navegadores desktop como Safari, Chrome, Opera e Firefox simplesmente renderiam uma caixa de texto &mdash; exatamente como <code>type="text"</code> &mdash; logo, seu usuário nunca irá notar a diferença (<a href=#validation>até tentar enviar o formulário</a>).

<p>Então surge o iPhone.

<p>O iPhone não possui um teclado físico. A digitação é feita por toque no teclado virtual, que surge nos momentos apropriados. Por exemplo, quando você seleciona um campo de um formulário web. A Apple fez algo inteligente no navegador do iPhone. Ele reconhece vários dos novos tipos de campos da <abbr>HTML5</abbr> e <em>dinamicamente altera o teclado virtual</em> adaptado para o campo específico.

<p>Por exemplo, o campo de endereço de email é um texto, certo? Certo, mas ele precisa de um tipo especial de texto, praticamente todos os endereços de email contém o <code>@</code> sign and e pelo menos um ponto (<code>.</code>), e não costumam ter nenhum espaço. Então quando você usa o iPhone e foca em um campo <code>&lt;input type="email"></code> , você tem um teclado virtual que possui uma barra de espaço menor que a usual, mais teclas especificas para os caracteres <code>@</code> e (<code>.</code>).

<p class=c><img src=i/input-type-email.png alt="Renderização do iPhone do campo type=email" title="observe as teclas específicas para os caracteres @ e . ao lado da barra de espaço" width=222 height=333 class=fr><br><a href=examples/input-type-email.html>Faça você o teste do campo <code>type="email"</code></a>.

<p>Para resumir: Não há nenhuma desvantagem em converter todos os seus campos de email para <code>type="email"</code>. Praticamente ninguém vai notar, exceto os usuários do iPhone, que provavelmente não vão notar também. Mas aqueles que notarem irão sorrir timidamente e agradecer a você por tornar a experiência na web um pouco mais fácil.

<p class=a>&#x2767;

<h2 id=type-url>Endereços web</h2>

<p>Endereços web - que a maioria dos usuários avançados de internet chamam de <abbr>URLs</abbr>, exceto por alguns poucos  <a href="http://www.douglasadams.com/dna/pedants.html">pedantes</a> que chamam de <abbr>URIs</abbr> &mdash; outro tipo de texto especializado. A sintaxe dos endereços web é definida pelos padrões de relevância da Internet. Se alguém pedir para você digitar um endereço web em um formulário, é esperado algo como &#8220;<code>http://www.google.com/</code>&#8221;, não &#8220;Rua Getulio Vargas, 160.&#8221; Barras são comuns &mdash; inclusive a pagina inicial do Google possui três delas. Pontos são tão comuns quanto, mas espaços são proibidos. E todos os endreços web possuem um sufixo relacionado a um domínio como:  &#8220;.com&#8221; ou &#8220;.org&#8221;.

<p>Observem... (rufar de tambores, por favor)... o <code>&lt;input type="url"></code>. No iPhone:

<p class=c><img src=i/input-type-url.png alt="Renderização do iPhone do campo tipo=url" width=222 height=333 class=fr><br><a href=examples/input-type-url.html>Faça você o teste do campo <code>type="url"</code></a>.

<p>O Iphone altera seu teclado virtual, do mesmo modo que ele faz para os campos de <a href=#type-email>endereço de email</a>, só que desta vez otimizado para endereços web. A barra de espaço é trocada por três teclas virtuais: um ponto, uma barra, e um botão &#8220;.com&#8221;. (Você pode pressionar por um tempo o botão &#8220;.com&#8221; para escolher outros sufixos comuns como &#8220;.org&#8221; ou &#8220;.net&#8221;.)

<p>A maioria dos navegadores modernos, simplesmente irão renderizar um campo <code>type="url"</code> como uma caixa de texto, logo seu usuário não irão notar a diferença <a href=#validation>até enviarem o formulário</a>. Navegadores que suportam a <abbr>HTML5</abbr> irão tratar o <code>type="url"</code> exatamente como um <code>type="text"</code>, por isso não há desvantagem em usa-los para todos os campos que requerem um endereço web.

<p class=a>&#x2767;

<h2 id=type-number>Números em caixas rotativas</h2>

<p>Em seguida: Números. Pedir um número é mais complicado do que pedir um endereço de e-mail ou endereço de web. Primeiro de tudo, números são mais complicados do que você imagina. Rápido: escolha um número. -1? Não, eu quero um número entre 1 e 10. 7&frac12;? Não, não uma fração, bobo. <span class=u>&pi;</span>? Agora você está começando a ser irracional.

<p>Meu ponto é, você geralmente não pede &#8220;apenas um número.&#8221; É mais provável que você queira um número em determinado intervalo. E você deseja apenas certo tipo de número neste intervalo - talvez todos os números, mas não frações ou decimais, ou algo mais esotérico como números divisíveis por 10. A <abbr>HTML5</abbr> lhe dá cobertura. 

<p class="legend top" style="margin-left:8em"><span class=arrow>&#x21b6;</span> Escolha um número, (quase) qualquer número 
<pre><code>&lt;input <mark>type="number"</mark>
       min="0"
       max="10"
       step="2"
       value="6"></code></pre>

<p>Vamos analisar um atributo por vez. (Você pode <a href=examples/input-type-number-min-max-step.html>acompanhar com este exemplo real</a>, se quiser.)

<ul>
<li><code>type="number"</code> significa que este é um campo numérico.
<li><code>min="0"</code> específica o valor mínimo aceitável para este campo.
<li><code>max="10"</code> é o valor maximo aceitável.
<li><code>step="2"</code>, combinado com o valor <code>min</code> define o número aceitável dentro do intervalo: <code>0</code>, <code>2</code>, <code>4</code>, e adiante, até o valor <code>max</code>
<li><code>value="6"</code> é o valor padrão. Isto deve parecer familiar. É o mesmo atributo que você sempre usou para especificar valores em um campo de formulário. (Eu mencionei ele aqui para chegar no ponto que a <abbr>HTML5</abbr> é baseada nas versões anteriores da <abbr>HTML</abbr>. Você não precisa reaprender como fazer as coisas que você já está fazendo.)</ul>

<p>Está é a marcação para campos numéricos. Tenha em mente que todos os atributos são opcionais. Se você tiver um mínimo e não um máximo, você pode especificar o atributo <code>min</code> mas não o <code>max</code>. O intervalo padrão é 1, podendo omitir o atributo <code>step</code>, se não for preciso um intervalo diferente. Se não existir um valor padrão, então o atributo <code>value</code> pode ser vazio ou até mesmo omitido.


<p>Mas a <abbr>HTML5</abbr> não acaba aqui. Pelo mesmo preço, de banana, você recebe estes métodos JavaScript super úteis:

<ul>
<li><code>input.stepUp(n)</code> aumenta o valor do campo por <code>n</code>.
<li><code>input.stepDown(n)</code> diminui o valor do campo por <code>n</code>.
<li><code>input.valueAsNumber</code> retorna o valor atual como ponto flutuante. (A propriedade <code>input.value</code> sempre retorna como string.)
</ul>

<p>Problemas pra visualizar? Bem, a interface exata do controle numérico depende do seu navegador, os fabricantes dos navegadores implementaram o suporte de diferentes formas. No iPhone, onde digitar é incômodo, o navegador <a href=#type-email>mais uma</a> <a href=#type-url>vez</a> otimiza o teclado virtual para entradas numéricas.

<p class=c><img src=i/input-type-number.png alt="Renderização do iPhone do campo  type=number" width=222 height=333 class=fr>

<p>Na versão desktop do Opera, o mesmo campo <code>type="number"</code> é renderizado com uma "caixa rotativa", com pequenas setas para cima e para baixo que você pode clicar e alterar o valor.

<p class=c><img src=i/input-type-number-opera.png alt="Renderização do Opera do campo type=number" width=227 height=203 class=fr>

<p>O Opera respeita os atributos <code>min</code>, <code>max</code>, and <code>step</code>,  você sempre irá acabar com um valor númerico aceitável. Caso você aumente o valor até o máximo, a seta superior da caixa rotativa fica desabilitada.

<p class=c><img src=i/input-type-number-at-max-opera.png alt="Renderização do Opera do campo type=number com um valor máximo" width=142 height=28 class=fr>

<p>Como acontece com todos os tipos de campos que comentei neste capítulo, navegadores que não suportam  <code>type="number"</code> irão trata-lo como <code>type="text"</code>. O valor padrão irá aparecer no campo (já que é armazenado no atributo <code>value</code>), mas os outros atributos como <code>min</code> e <code>max</code> serão ignorados. Você é livre para implementa-los como quiser, ou pode reutilizar um biblioteca Javascript que já possui um controle de caixa rotativa. Apenas <a href=detect.html#input-types>cheque o suporte nativo da <abbr>HTML5</abbr> primeiro</a>, deste jeito:

<pre><code>if (!<a href=detect.html#modernizr>Modernizr</a>.inputtypes.number) {
  // sem suporte nativo ao campo type=number
  // talvez use Dojo ou outra biblioteca Javascript
}</code></pre>

<p class=a>&#x2767;

<h2 id=type-range>Numbers as Sliders</h2>

<p><a href=#type-number>Spinboxes</a> are not the only way to represent numeric input. You&#8217;ve probably also seen &#8220;slider&#8221; controls that look like this:

<p class=c><img src=i/input-type-range.png alt="Chrome rendering of input type=range field as slider control" width=175 height=25><br><a href=examples/input-type-range.html>Test <code>type="range"</code> for yourself</a>.

<p>You can now have slider controls in your web forms, too. The markup looks eerily similar to <a href=#type-range>spinbox controls</a>:

<p class="legend top" style="margin-left:8em"><span class=arrow>&#x21b6;</span> The spitting image
<pre><code>&lt;input <mark>type="range"</mark>
       min="0"
       max="10"
       step="2"
       value="6"></code></pre>

<p>All the available attributes are the same as <code>type="number"</code> &mdash; <code>min</code>, <code>max</code>, <code>step</code>, <code>value</code> &mdash; and they mean the same thing. The only difference is the user interface. Instead of a field for typing, browsers are expected to render <code>type="range"</code> as a slider control. Safari, Chrome, and Opera all do this. (Sadly, the iPhone renders it as a simple text box. It doesn&#8217;t even optimize its on-screen keyboard for numeric input.) All other browsers simply treat the field as <code>type="text"</code>, so there&#8217;s no reason you can&#8217;t start using it immediately.

<p class=a>&#x2767;

<h2 id=type-date>Date Pickers</h2>

<p><abbr>HTML</abbr> 4 did not include a date picker control. JavaScript frameworks have picked up the slack (<a href=http://docs.dojocampus.org/dijit/form/DateTextBox>Dojo</a>, <a href=http://docs.jquery.com/UI/Datepicker>jQuery UI</a>, <a href=http://developer.yahoo.com/yui/calendar/>YUI</a>, <a href=http://closure-library.googlecode.com/svn/docs/class_goog_ui_DatePicker.html>Closure Library</a>), but of course each of these solutions requires &#8220;buying into&#8221; the framework on which the date picker is built.

<p><abbr>HTML5</abbr> finally defines a way to include a native date picker control without having to script it yourself. In fact, it defines six: date, month, week, time, date + time, and date + time - timezone.

<p>So far, support is&hellip; sparse.

<table class=bc>
<caption>Date picker support</caption>
<thead>
<tr><th style="text-align:left">Input Type<th>Opera<th>Every other browser
<tbody>
<tr><th><code>type="date"</code><td>9.0+<td>&middot;
<tr><th><code>type="month"</code><td>9.0+<td>&middot;
<tr><th><code>type="week"</code><td>9.0+<td>&middot;
<tr><th><code>type="time"</code><td>9.0+<td>&middot;
<tr><th><code>type="datetime"</code><td>9.0+<td>&middot;
<tr><th><code>type="datetime-local"</code><td>9.0+<td>&middot;
</table>

<p>This is how Opera renders <a href=examples/input-type-date.html><code>&lt;input type="date"></code></a>:

<blockquote>
<p><img src=i/input-type-date.png alt="Opera's type=date picker" width=210 height=190>
</blockquote>

<p>If you need a time to go with that date, Opera also supports <a href=examples/input-type-datetime.html><code>&lt;input type="datetime"></code></a>:

<blockquote>
<p><img src=i/input-type-datetime.png alt="Opera's type=datetime picker" width=225 height=191>
</blockquote>

<p>If you only need a month + year (perhaps a credit card expiration date), Opera can render a <a href=examples/input-type-month.html><code>&lt;input type="month"></code></a>:

<blockquote>
<p><img src=i/input-type-month.png alt="Opera's type=month picker" width=210 height=189>
</blockquote>

<p>Less common, but also available, is the ability to pick a specific week of a year with <a href=examples/input-type-week.html><code>&lt;input type="week"></code></a>:

<blockquote>
<p><img src=i/input-type-week.png alt="Opera's type=week picker" width=210 height=191>
</blockquote>

<p>Last but not least, you can pick a time with <a href=examples/input-type-time.html><code>&lt;input type="time"></code></a>:

<blockquote>
<p><img src=i/input-type-time.png alt="Opera's type=time picker" width=98 height=22>
</blockquote>

<p>It&#8217;s likely that other browsers will eventually support these input types. But just like <a href=#type-email><code>type="email"</code></a> and the other input types, these form fields will be rendered as plain text boxes in browsers that don&#8217;t recognize <code>type="date"</code> and the other variants. If you like, you can simply use <code>&lt;input type="date"></code> and friends, make Opera users happy, and wait for other browsers to catch up. More realistically, you can use <code>&lt;input type="date"></code>, <a href=detect.html#input-types>detect whether the browser has native support for date pickers</a>, and fall back to a scripted solution of your choice (<a href=http://docs.dojocampus.org/dijit/form/DateTextBox>Dojo</a>, <a href=http://docs.jquery.com/UI/Datepicker>jQuery UI</a>, <a href=http://developer.yahoo.com/yui/calendar/>YUI</a>, <a href=http://closure-library.googlecode.com/svn/docs/class_goog_ui_DatePicker.html>Closure Library</a>, or some other solution).

<p class="legend top" style="margin-left:6em"><span class=arrow>&#x21b6;</span> Date picker with fallback
<pre><code>&lt;form>
  &lt;input type="date">
&lt;/form>
...
&lt;script>
  var i = document.createElement("input");
  i.setAttribute("type", "date");
  if (i.type == "text") {
    // No native date picker support :(
    // Use Dojo/jQueryUI/YUI/Closure to create one,
    // then dynamically replace that &lt;input> element.
  }
&lt;/script></code></pre>

<p class=a>&#x2767;

<h2 id=type-search>Search Boxes</h2>

<p>OK, this one is subtle. Well, the idea is simple enough, but the implementations may require some explanation. Here goes&hellip;

<p>Search. Not just Google Search or Yahoo Search. (Well, those too.) Think of any search box, on any page, on any site. Amazon has a search box. Newegg has a search box. Most blogs have a search box. How are they marked up? <code>&lt;input type="text"></code>, just like every other text box on the web. Let&#8217;s fix that.

<pre style="float:left"><code>&lt;form>
  &lt;input name="q" <mark>type="search"</mark>>
  &lt;input type="submit" value="Find">
&lt;/form></code></pre>
<p class="legend right" style="margin-top:2.75em"><span class=arrow>&nbsp;&#x21dc;</span> New-age search box

<p class="clear"><a href=examples/input-type-search.html>Test <code>&lt;input type="search"></code> in your own browser</a>. In some browsers, you won&#8217;t notice any difference from a regular text box. But if you&#8217;re using Safari on Mac OS X, it will look like this:

<p class=c><img src=i/input-type-search-safari.png alt="Safari/Mac rendering input type=search field" width=191 height=121>

<p>Can you spot the difference? The input box has rounded corners! I know, I know, you can hardly contain your excitement. But wait, there&#8217;s more! When you actually start typing into the <code>type="search"</code> box, Safari inserts a small &#8220;x&#8221; button on the right side of the box. Clicking the &#8220;x&#8221; clears the contents of the field. (Google Chrome, which shares much technology with Safari under the hood, also exhibits this behavior.) Both of these small tweaks are done to match the look and feel of native search boxes in iTunes and other Mac OS X client applications.

<p class=c><img src=i/input-type-search-safari-typing.png alt="Typing in a type=search field in Safari" width=191 height=121>

<p><a href=http://www.apple.com/>Apple.com</a> uses <code>&lt;input type="search"></code> for their site-search box, to help give their site a &#8220;Mac-like&#8221; feel. But there&#8217;s nothing Mac-specific about it. It&#8217;s just markup, so each browser on each platform can choose to render it according to platform-specific conventions. As with all the other new input types, browsers that don&#8217;t recognize <code>type="search"</code> will treat it like <code>type="text"</code>, so there is absolutely no reason not to start using <code>type="search"</code> for all your search boxes today.

<div class="pf clear">
<h4>Professor Markup Says</h4>
<div class=inner>
<blockquote class=note>
<p>By default, older versions of Safari will not apply even the most basic CSS styles to <code>&lt;input type="search"></code> fields. If you want to force Safari to treat your search field like a normal text field (so you can apply your own <abbr>CSS</abbr> styles), add this rule to your stylesheet:
<blockquote><pre><code>input[type="search"] {
  -webkit-appearance: textfield;
}</code></pre></blockquote>
<p><i>Thanks to John Lein for teaching me this trick.</i>
</blockquote>
</div>
</div>

<p class=a>&#x2767;

<h2 id=type-color>Color Pickers</h2>

<p><abbr>HTML5</abbr> also defines <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/number-state.html#color-state><code>&lt;input type="color"></code></a>, which lets you pick a color and returns the color&#8217;s hexadecimal representation. <del>No browser supports it yet, which is a shame, because I&#8217;ve always loved <a href=http://earthlingsoft.net/ssp/blog/2006/04/colour_me_picked>the Mac OS color picker</a>. Maybe someday.</del> Good news, everyone! <a href=http://dev.opera.com/articles/view/new-form-features-in-html5/#input-color>Opera 11 now supports <code>type=color</code></a>. On Mac and Windows, it integrates with the platform's native color picker. On Linux, it drops down a basic color picker. On all platforms, the return value of the input control is a six-digit hexadecimal RGB color, suitable for framing or using anywhere that accepts a CSS color.

<p class=c><img src=i/input-type-color.png alt="Opera rendering of input type=range field on multiple platforms" width=582 height=444><br><a href=examples/input-type-color.html>Test <code>type="color"</code> for yourself</a>.

<p><i>Thanks to Patrick Lauke and Chris Mills for relicensing this image for inclusion in this book.</i> You should <a href=http://dev.opera.com/articles/view/new-form-features-in-html5/>read their article about the new form features in Opera 11</a>.

<p class=a>&#x2767;

<h2 id=validation>Form Validation</h2>

<table class=bc>
<caption>Form validation support</caption>
<thead>
<tr><th title="Internet Explorer">IE<th title="Mozilla Firefox">Firefox<th title="Apple Safari">Safari<th title="Google Chrome">Chrome<th>Opera<th>iPhone<th>Android
<tbody>
<tr><td>&middot;<td>4.0+<td>5.0+<td>10.0+<td>9.0+<td>&middot;<td>&middot;
</table>

<p>In this chapter, I&#8217;ve talked about new input types and new features like auto-focus form fields, but I haven&#8217;t mentioned what is perhaps the most exciting part of <abbr>HTML5</abbr> forms: automatic input validation. Consider the common problem of entering an email address into a web form. You probably have some client-side validation in JavaScript, followed by server-side validation in PHP or Python or some other server-side scripting language. <abbr>HTML5</abbr> can never replace your server-side validation, but it might someday replace your client-side validation.

<p>There are two big problems with validating email addresses in JavaScript:

<ol>
<li>A surprising number of your visitors (probably around 10%) won&#8217;t have JavaScript enabled
<li>You&#8217;ll get it wrong
</ol>

<p>Seriously, you&#8217;ll get it wrong. Determining whether a random string of characters is a valid email address <a href="http://www.regular-expressions.info/email.html">is unbelievably complicated</a>. The harder you look, <a href="http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html">the more complicated it gets</a>. Did I mention it&#8217;s <a href="http://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx">really, really complicated</a>? Wouldn&#8217;t it be easier to offload the entire headache to your browser?

<p class="legend top" style="width:500px;text-align:center">Most modern browsers validate type=&#8220;email&#8221; <span class=arrow>&#x21b7;</span><br></p>
<p class=c><img src=i/input-type-email-validation.png alt="error message on invalid type=email field" width=243 height=76>

<p>That screenshot is from Opera 10, although the functionality has been present since Opera 9. <a href=http://blog.mozilla.com/webdev/2011/03/14/html5-form-validation-on-sumo/>Firefox 4 and Chrome 10 provide similar functionality</a>. The only markup involved is <a href=#type-email>setting the <code>type</code> attribute to <code>"email"</code></a>. When the user tries to submit a form with an <code>&lt;input type="email"></code> field, the browser automatically offers <abbr>RFC</abbr>-compliant email validation, even if scripting is disabled.

<p><abbr>HTML5</abbr> also offers validation of web addresses entered into <code>&lt;input type="url"></code> fields, and numbers in <code>&lt;input type="number"></code> fields. The validation of numbers even takes into account the <code>min</code> and <code>max</code> attributes, so browsers will not let you submit the form if you enter a number that is too large.

<p class=c><img src=i/input-type-number-validation.png alt="error message on invalid type=number field" width=135 height=76>

<p>There is no markup required to activate <abbr>HTML5</abbr> form validation; it is on by default. To turn it off, use the <code>novalidate</code> attribute.

<p class="legend top">Don&#8217;t validate me, bro <span class=arrow>&#x21b7;</span><br></p>
<pre><code>&lt;form <mark>novalidate</mark>>
  &lt;input type="email" id="addr">
  &lt;input type="submit" value="Subscribe">
&lt;/form></code></pre>

<p class=a>&#x2767;

<h2 id=required>Required Fields</h2>

<table class=bc>
<caption>&lt;input required> support</caption>
<thead>
<tr><th title="Internet Explorer">IE<th title="Mozilla Firefox">Firefox<th title="Apple Safari">Safari<th title="Google Chrome">Chrome<th>Opera<th>iPhone<th>Android
<tbody>
<tr><td>&middot;<td>4.0+<td>&middot;<td>10.0+<td>9.0+<td>&middot;<td>&middot;
</table>

<p><a href=#validation><abbr>HTML5</abbr> form validation</a> isn&#8217;t limited to the type of each field. You can also specify that certain fields are required. Required fields must have a value before you can submit the form.

<p>The markup for required fields is as simple as can be:

<pre><code>&lt;form>
  &lt;input id="q" <mark>required</mark>>
  &lt;input type="submit" value="Search">
&lt;/form></code></pre>

<p class="clear"><a href=examples/input-required.html>Test <code>&lt;input required></code> in your own browser</a>. Browsers may alter the default appearance of required fields. For example, this is what a required field looks like in Mozilla Firefox 4.0:

<p class=c><img src=i/input-required.png alt="default appearance of required fields in Firefox" width=250 height=122>

<p>Furthermore, if you attempt to submit the form without filling in the required value, Firefox will pop up an infobar telling you that the field is mandatory and can not be left blank.

<p class=a>&#x2767;

<h2 id=further-reading>Further Reading</h2>

<p>Specifications and standards:

<ul>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#states-of-the-type-attribute><code>&lt;input></code> types</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute>the <code>&lt;input placeholder></code> attribute</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control>the <code>&lt;input autofocus></code> attribute</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fs-novalidate>the <code>&lt;form novalidate></code> attribute</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-required-attribute>The <code>&lt;input required></code> attribute</a>
</ul>

<p>JavaScript libraries:

<ul>
<li><a href=http://www.modernizr.com/>Modernizr</a>, an <abbr>HTML5</abbr> detection library
</ul>

<p>Useful articles:

<ul>
<li><a href=http://www.alistapart.com/articles/forward-thinking-form-validation/>Forward Thinking Form Validation</a>
<li><a href=http://dev.opera.com/articles/view/new-form-features-in-html5/>New form features in Opera 11</a>
<li><a href=https://developer.mozilla.org/en/HTML/HTML5/Forms_in_HTML5>Mozilla Developer Center: Forms in HTML5</a>
<li><a href=https://developer.mozilla.org/en/HTML/HTML5/Forms_in_HTML5><abbr>HTML5</abbr> Forms in Mozilla Firefox 4.0+</a>
<li><a href=http://blog.mozilla.com/webdev/2011/03/14/html5-form-validation-on-sumo/>HTML5 Form Validation</a>
</ul>

<p class=a>&#x2767;

<p>This has been &#8220;A Form of Madness.&#8221; The <a href=table-of-contents.html>full table of contents</a> has more if you&#8217;d like to keep reading.

<div class=pf>
<h4>Did You Know?</h4>
<div class=moneybags>
<blockquote><p>In association with Google Press, O&#8217;Reilly is distributing this book in a variety of formats, including paper, ePub, Mobi, and <abbr>DRM</abbr>-free <abbr>PDF</abbr>. The paid edition is called &#8220;HTML5: Up &amp; Running,&#8221; and it is available now. This chapter is included in the paid edition.
<p>If you liked this chapter and want to show your appreciation, you can <a href="http://www.amazon.com/HTML5-Up-Running-Mark-Pilgrim/dp/0596806027?ie=UTF8&amp;tag=diveintomark-20&amp;creativeASIN=0596806027">buy &#8220;HTML5: Up &amp; Running&#8221; with this affiliate link</a> or <a href=http://oreilly.com/catalog/9780596806033>buy an electronic edition directly from O&#8217;Reilly</a>. You&#8217;ll get a book, and I&#8217;ll get a buck. I do not currently accept direct donations.
</blockquote>
</div>
</div>

<p class=c>Copyright MMIX&ndash;MMXI <a href=about.html>Mark Pilgrim</a>

<form action=http://www.google.com/cse><div><input type=hidden name=cx value=017884302975346027366:bgclqh8nvse><input type=hidden name=ie value=UTF-8><input type=search name=q size=25 placeholder="powered by Google&trade;">&nbsp;<input type=submit name=sa value=Search></div></form>
<script src=j/jquery.js></script>
<script src=j/modernizr.js></script>
<script src=j/dih5.js></script>
